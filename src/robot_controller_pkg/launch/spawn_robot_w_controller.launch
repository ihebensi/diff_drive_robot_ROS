<?xml version="1.0"?>

<launch>
  <include
    file="$(find gazebo_ros)/launch/empty_world.launch" >
    <arg name="use_sim_time" value="true"/>
    <arg name="debug" value="false"/>
    <arg name="gui" value="true"/>
    <arg name="paused" value="true"/>
  </include>
  
  
  
  <param name="robot_description" command="cat '$(find robot_controller_pkg)/urdf/cdc.urdf' "/>
  
  <!-- load the node controller manager -->
    <rosparam command="load" 
            file="$(find robot_controller_pkg)/config/joint_controller_cdc.yaml"/>
            
    <node name="controller_spawner" 
        pkg="controller_manager" 
        type="spawner"  output="screen" 
        respawn="false" ns="/testbot" 
        args="joint_state_controller 
            mobile_controller
            --timeout 60">
        
    </node>
    
    <!-- convert joint states to TF transform for rviz and rqt -->

    <node name="robot_state_publisher" 
            pkg="robot_state_publisher" 
            type="robot_state_publisher" output="screen" 
            respawn="false">
        <remap from="/joint_states" to="/testbot/joint_states"/>

    </node>
    <node
    name="spawn_robot"
    pkg="gazebo_ros"
    type="spawn_model"
    args="-urdf -param robot_description -model testbot"
    output="screen" />
  <!-- <node
    name="tf_footprint_base"
    pkg="tf"
    type="static_transform_publisher"
    args="0 0 0 0 0 0 base_link base_footprint 40" />
  
  <node
    name="fake_joint_calibration"
    pkg="rostopic"
    type="rostopic"
    args="pub /calibrated std_msgs/Bool true" /> -->

    <node name="rqt_reconfigure" pkg="rqt_gui" type="rqt_gui" />
</launch>